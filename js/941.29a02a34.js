(self["webpackChunkAutumn"]=self["webpackChunkAutumn"]||[]).push([[941],{35941:function(t,e,a){"use strict";a.r(e),a.d(e,{default:function(){return D}});var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-mining-warp"},[a("a-row",[a("a-col",{attrs:{lg:{span:16,offset:4},md:{span:24,offset:0}}},[a("div",{staticClass:"earn_wrap"},[a("div",{staticClass:"earn-header"},[a("div",{staticClass:"title"},[t._v(t._s(t.$t("earn.headerTitle")))]),a("div",{staticClass:"sub-title"},[t._v(t._s(t.$t("earn.headerSubTitle")))])]),a("div",{staticClass:"infocard card box-shadow"},[a("div",{staticClass:"info_header"},[a("p",{staticClass:"sxtitle"},[t._v(" "+t._s(t.$t("mining.totalValueLock"))+" "),a("a-tooltip",{attrs:{placement:"topLeft"}},[a("template",{slot:"title"},[a("span",[t._v(t._s(t.$t("earn.tips1")))])]),a("a-icon",{staticStyle:{"margin-left":"10px"},attrs:{type:"question-circle"}})],2),a("span",{staticStyle:{"margin-left":"15px"}},[t._v("$"+t._s(t.numberParse(t.$eventBus.humanFriendlyBalance(t.$eventBus.totalValue,18))))])],1),a("a",{attrs:{href:t.$t("default.wikiUrl"),target:"_blank"}},[a("a-button",{staticClass:"earn-tutorial",attrs:{type:"primary"}},[t._v(" "+t._s(t.$t("earn.tutorial"))+" ")])],1)])]),t._l(t.earnData,(function(e,s){return[a("div",{key:s,staticClass:"earn_title"},[t._v(" "+t._s(t.$t(e.title))+" ")]),a("a-row",{key:e.title,attrs:{type:"flex",justify:"start"}},t._l(t.vaultData.length?e.vaultList.filter((function(e){return t.vaultData[e.pool_contract_address]})):e.vaultList,(function(e,s){return a("a-col",{key:s,attrs:{span:6,xs:24,sm:12,md:12,lg:8,xl:8,xxl:6}},[a("div",{staticClass:"card_item box-shadow"},[a("div",{staticClass:"coin blue"},[a("div",{staticClass:"item"},[a("div",{staticClass:"coin-symbol"},[a("div",{staticClass:"coin-logo"},[a("svg-icon",{staticClass:"coin-logo",attrs:{"icon-class":e.icon}})],1),a("div",{staticClass:"coin-name bold"},[t._v(t._s(e.name))])])]),a("div",{staticClass:"card_item_item pb16"},[a("div",{staticClass:"card-content"},[a("span",{staticClass:"left"},[t._v(t._s(t.$t("earn.apy"))+" "),a("a-tooltip",{attrs:{placement:"topLeft"}},[a("template",{slot:"title"},[a("span",[t._v(t._s(t.$t("earn.tips3")))])]),a("a-icon",{staticStyle:{"margin-left":"5px"},attrs:{type:"question-circle"}})],2)],1),a("span",{staticClass:"right"},[a("span",[t._v(" "+t._s(t.vaultData[e.pool_contract_address]?t.$eventBus.humanFriendlyBalance(t.vaultData[e.pool_contract_address].apy,16):0)+"%")])])]),a("div",{staticClass:"card-item-row"},[a("div",{staticClass:"row-item"},[a("a-badge",{attrs:{status:"processing"}}),a("span",{staticClass:"row-value"},[t._v(" "+t._s(t.vaultData[e.pool_contract_address]?t.numberParse(t.$eventBus.humanFriendlyBalance(t.vaultData[e.pool_contract_address].totalStaked,e.asset.decimals)):0)+" "),a("span",[t._v(t._s(e.outType))])]),a("span",{staticClass:"row-symbol"}),a("div",{staticClass:"row-keyword"},[t._v(" "+t._s(t.$t("earn.staked"))+" ")])],1),a("div",{staticClass:"row-item"},[a("a-badge",{attrs:{status:"processing",color:"pink"}}),a("span",{staticClass:"row-value"},[t._v(t._s(e.name))]),a("span",{staticClass:"row-symbol"}),a("div",{staticClass:"row-keyword"},[t._v(" "+t._s(t.$t("earn.earn"))+" ")])],1)])]),a("div",{staticClass:"card-open-btn flex-center"},[t.$eventBus.connected?a("a-button",{attrs:{type:"primary",size:"large"},on:{click:function(a){return t.openDepositModal(e)}}},[t._v(" "+t._s(t.$t("earn.select"))+" ")]):a("a-button",{attrs:{type:"primary",size:"large"},on:{click:function(e){return t.$eventBus.connectWallet()}}},[t._v(" "+t._s(t.$t("default.connect"))+" ")])],1)])])])})),1)]}))],2)])],1),t.curVault?a("depositModal",{attrs:{visible:t.showDepositModal,"asset-name":t.curVault.name,"asset-address":t.curVault.asset.address,"asset-decimals":t.curVault.asset.decimals,pool_contract_address:t.curVault.pool_contract_address},on:{cancel:function(e){t.showDepositModal=!1,t.curVault=null}}}):t._e()],1)},n=[],r=a(9596);a(47941),a(82526),a(57327),a(38880),a(54747),a(49337);function o(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function i(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,s)}return a}function l(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?i(Object(a),!0).forEach((function(e){o(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}a(35666);var c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.visible?a("a-modal",{staticClass:"modal-depositModal",attrs:{width:"400px",visible:!0,footer:null},on:{cancel:t.handleCancel}},[t.showApprove?a("div",[a("div",{staticClass:"approve-header"},[t._v(" "+t._s(t.$t("depositModal.approve"))+" ")]),a("div",{staticClass:"approve-desc"},[a("div",[t._v(t._s(t.$t("depositModal.approveContentLine1",{1:t.assetName})))]),a("div",[t._v(t._s(t.$t("depositModal.approveContentLine2")))])]),a("a-button",{staticClass:"confirm-btn",attrs:{type:"primary",size:"large",loading:t.approveLoading},on:{click:function(e){return t.approve()}}},[t._v(t._s(t.$t("depositModal.approveAsset",{1:t.assetName})))])],1):a("a-tabs",{attrs:{"default-active-key":"deposit"},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},[a("a-tab-pane",{key:"deposit",attrs:{tab:t.$t("depositModal.deposit")}},[a("a-form",{attrs:{form:t.form,"label-col":{span:5},"wrapper-col":{span:24}}},[a("a-form-item",{attrs:{label:t.$t("depositModal.depositAmount")}},[a("a-input",{attrs:{size:"large",autoFocus:!0,placeholder:"0.0",suffix:t.assetName},on:{keyup:function(e){t.form.depositAmount=t.inputFormat(t.form.depositAmount)}},model:{value:t.form.depositAmount,callback:function(e){t.$set(t.form,"depositAmount",e)},expression:"form.depositAmount"}}),a("div",{staticClass:"max-btn",on:{click:function(e){return t.maxAmount()}}},[t._v("MAX")]),a("div",{staticClass:"balance"},[a("span",{staticClass:"label"},[t._v(t._s(t.$t("depositModal.walletBalance")))]),a("span",{staticClass:"asset-name"},[t._v(t._s(t.assetName))]),a("span",{staticClass:"value"},[t._v(t._s(t.$eventBus.humanFriendlyBalance(t.currentVaultData.userBalance,t.assetDecimals,4)))])])],1),a("div",{staticStyle:{"margin-top":"20px"}},[t._v(" "+t._s(t.$t("depositModal.depositTip1"))+" "),a("a",{attrs:{href:t.$t("default.faqUrl"),target:"_blank"}},[t._v(t._s(t.$t("depositModal.learnMore")))])]),a("div",{staticStyle:{"margin-top":"10px"}},[t._v(" "+t._s(t.$t("depositModal.depositTip2",{1:"a"+t.assetName}))+" "),a("a",{attrs:{href:t.$t("default.faqUrl"),target:"_blank"}},[t._v(t._s(t.$t("depositModal.learnMore")))])]),a("a-button",{staticClass:"confirm-btn",attrs:{type:"primary",size:"large",disabled:t.depositDisable,loading:t.depositLoading},on:{click:function(e){return t.deposit()}}},[t._v(t._s(t.$t("depositModal.confirm"))+" ")])],1)],1),a("a-tab-pane",{key:"withdraw",attrs:{tab:t.$t("depositModal.withdraw")}},[a("a-form",{attrs:{form:t.form,"label-col":{span:5},"wrapper-col":{span:24}}},[a("a-form-item",{attrs:{label:t.$t("depositModal.withdrawAmount")}},[a("a-input",{attrs:{size:"large",autoFocus:!0,placeholder:"0.0",suffix:"a"+t.assetName},on:{keyup:function(e){t.form.withdrawAmount=t.inputFormat(t.form.withdrawAmount)}},model:{value:t.form.withdrawAmount,callback:function(e){t.$set(t.form,"withdrawAmount",e)},expression:"form.withdrawAmount"}}),a("div",{staticClass:"max-btn",on:{click:function(e){return t.maxAmount()}}},[t._v("MAX")]),a("div",{staticClass:"balance"},[a("span",{staticClass:"label"},[t._v(t._s(t.$t("depositModal.vaultBalance")))]),a("span",{staticClass:"asset-name"},[t._v("a"+t._s(t.assetName))]),a("span",{staticClass:"value"},[t._v(t._s(t.$eventBus.humanFriendlyBalance(t.currentVaultData.userStaked,t.assetDecimals,4)))])]),a("div",{staticClass:"balance equal"},[a("span",{staticClass:"asset-name"},[t._v(t._s(t.assetName))]),a("span",{staticClass:"value"},[t._v(t._s(t.$eventBus.humanFriendlyBalance(t.currentVaultData.userShareToAsset,t.assetDecimals,4)))]),a("span",{staticClass:"symbol"},[t._v("=")])])],1),a("div",{staticStyle:{"margin-top":"20px"}},[t._v(" "+t._s(t.$t("depositModal.withdrawTip1"))+" "),a("a",{attrs:{href:t.$t("default.faqUrl"),target:"_blank"}},[t._v(t._s(t.$t("depositModal.learnMore")))])]),a("div",{staticStyle:{"margin-top":"10px"}},[t._v(" "+t._s(t.$t("depositModal.withdrawTip2",{1:"a"+t.assetName}))+" "),a("a",{attrs:{href:t.$t("default.faqUrl"),target:"_blank"}},[t._v(t._s(t.$t("depositModal.learnMore")))])]),a("a-button",{staticClass:"confirm-btn",attrs:{type:"primary",size:"large",loading:t.withdrawLoading,disabled:t.withdrawDisable},on:{click:function(e){return t.withdraw()}}},[t._v(t._s(t.$t("depositModal.confirm")))])],1)],1)],1)],1):t._e()},u=[],d=(a(9653),a(56977),a(15306),a(74916),a(41539),a(39714),{numberParse:function(t){if(null!==t)return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},inputFormat:function(t){if(null!==t)return t.replace(/[^\d^.]+/g,"").replace(".","$#$").replace(/\./g,"").replace("$#$",".")},sleep:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;return new Promise((function(s){var n=setTimeout((function(){clearTimeout(n),s(t(e))}),a)}))}}),p=a(52099),m={name:"depositModal",props:{visible:{type:Boolean,default:!1},assetName:{type:String,require:!0},assetAddress:{type:String},assetWei:{type:String,default:"ether"},assetDecimals:{type:Number,default:18},pool_contract_address:{type:String,require:!0}},computed:{currentVaultData:function(){return this.$eventBus.vaultData[this.pool_contract_address]},depositAmount:function(){return(0,p.BigNumber)(this.form.depositAmount).times((0,p.BigNumber)(Math.pow(10,this.assetDecimals))).toFixed()},depositDisable:function(){return this.form.depositAmount<=0||(0,p.BigNumber)(this.depositAmount).gt((0,p.BigNumber)(this.currentVaultData.userBalance))},withdrawDisable:function(){return this.form.withdrawAmount<=0||(0,p.BigNumber)(this.withdrawAmount).gt((0,p.BigNumber)(this.currentVaultData.userStaked))},withdrawAmount:function(){return(0,p.BigNumber)(this.form.withdrawAmount).times((0,p.BigNumber)(Math.pow(10,this.assetDecimals))).toFixed()}},data:function(){return{type:"deposit",showApprove:!1,form:{depositAmount:null,withdrawAmount:null},depositLoading:!1,withdrawLoading:!1,approveLoading:!1}},methods:l(l({},d),{},{maxAmount:function(){"deposit"===this.type?this.form.depositAmount=(0,p.BigNumber)(this.currentVaultData.userBalance).div((0,p.BigNumber)(Math.pow(10,this.assetDecimals))).toFixed():this.form.withdrawAmount=(0,p.BigNumber)(this.currentVaultData.userStaked).div((0,p.BigNumber)(Math.pow(10,this.assetDecimals))).toFixed()},handleCancel:function(){this.$emit("cancel",!0)},deposit:function(){var t=this;return(0,r.Z)(regeneratorRuntime.mark((function e(){var a,s,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.currentVaultData.userAllowance;case 3:if(a=e.sent,!(0,p.BigNumber)(a).lt((0,p.BigNumber)(t.depositAmount))){e.next=7;break}return t.showApprove=!0,e.abrupt("return");case 7:return t.depositLoading=!0,s=t.depositAmount,n=0,"HT"===t.assetName&&(n=s),e.next=13,t.$eventBus.depositTo(t.assetAddress,t.pool_contract_address,s,n);case 13:t.$eventBus.$off("DEPOSIT_SUCCESS"),t.$eventBus.$on("DEPOSIT_SUCCESS",(function(){t.form.depositAmount=0,t.depositLoading=!1,t.refreshData()})),t.$eventBus.$off("DEPOSIT_FAILED"),t.$eventBus.$on("DEPOSIT_FAILED",(function(){t.form.depositAmount=0,t.depositLoading=!1,t.refreshData()})),e.next=23;break;case 19:e.prev=19,e.t0=e["catch"](0),console.log(e.t0),t.$notification.error({message:"网络不稳定，请重试"});case 23:case"end":return e.stop()}}),e,null,[[0,19]])})))()},withdraw:function(){var t=this;return(0,r.Z)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,t.withdrawLoading=!0,e.next=4,t.$eventBus.withdrawFrom(t.assetAddress,t.pool_contract_address,t.withdrawAmount);case 4:t.$eventBus.$off("WITHDRAW_SUCCESS"),t.$eventBus.$on("WITHDRAW_SUCCESS",(function(){t.form.withdrawAmount=0,t.withdrawLoading=!1,t.refreshData()})),t.$eventBus.$off("WITHDRAW_FAILED"),t.$eventBus.$on("WITHDRAW_FAILED",(function(){t.form.withdrawAmount=0,t.withdrawLoading=!1,t.refreshData()})),e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](0),t.$notification.error({message:"网络不稳定，请重试"});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))()},approve:function(){var t=this;return(0,r.Z)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,t.approveLoading=!0,e.next=4,t.$eventBus.approveAsset(t.assetAddress,t.pool_contract_address);case 4:t.$eventBus.$off("APPROVE_SUCCESS"),t.$eventBus.$on("APPROVE_SUCCESS",(function(){t.showApprove=!1,t.approveLoading=!1})),t.$eventBus.$off("APPROVE_FAILED"),t.$eventBus.$on("APPROVE_SUCCESS",(function(){t.showApprove=!1,t.approveLoading=!1,t.deposit()})),e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](0),t.$notification.error({message:"网络不稳定，请重试"});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))()},refreshData:function(){var t=this;return(0,r.Z)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$eventBus.fetchData();case 2:case"end":return e.stop()}}),e)})))()}}),created:function(){var t=this;return(0,r.Z)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.refreshData();case 1:case"end":return e.stop()}}),e)})))()},beforeDestroy:function(){var t=this;return(0,r.Z)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.$eventBus.$off("APPROVE_SUCCESS");case 1:case"end":return e.stop()}}),e)})))()}},v=m,f=a(25961),_=(0,f.Z)(v,c,u,!1,null,null,null),h=_.exports,w=a(96320),g=a(37026),b={components:{depositModal:h},computed:{vaultData:function(){return this.$eventBus.vaultData}},data:function(){return{earnData:[{title:"earn.popularAssets",vaultList:[{name:"USDT",icon:"USDT",asset:w.Ll.USDT,pool_contract_address:g.Z.USDT},{name:"HUSD",icon:"HUSD",asset:w.Ll.HUSD,pool_contract_address:g.Z.HUSD},{name:"HT",icon:"HT",asset:{address:"",decimals:18,wei:"ether"},pool_contract_address:g.Z.HT},{name:"BTC",icon:"BTC",asset:w.Ll.BTC,pool_contract_address:g.Z.BTC},{name:"ETH",icon:"ETH",asset:w.Ll.ETH,pool_contract_address:g.Z.ETH},{name:"DOT",icon:"DOT",asset:w.Ll.DOT,pool_contract_address:g.Z.DOT},{name:"LTC",icon:"LTC",asset:w.Ll.LTC,pool_contract_address:g.Z.LTC},{name:"FIL",icon:"FIL",asset:w.Ll.FIL,pool_contract_address:g.Z.FIL},{name:"BCH",icon:"BCH",asset:w.Ll.BCH,pool_contract_address:g.Z.BCH},{name:"UNI",icon:"UNI",asset:w.Ll.UNI,pool_contract_address:g.Z.UNI},{name:"LINK",icon:"LINK",asset:w.Ll.LINK,pool_contract_address:g.Z.LINK},{name:"AAVE",icon:"AAVE",asset:w.Ll.AAVE,pool_contract_address:g.Z.AAVE},{name:"SNX",icon:"SNX",asset:w.Ll.SNX,pool_contract_address:g.Z.SNX},{name:"YFI",icon:"YFI",asset:w.Ll.YFI,pool_contract_address:g.Z.YFI},{name:"COMP",icon:"COMP",asset:w.Ll.COMP,pool_contract_address:g.Z.COMP}]},{title:"earn.innovation",vaultList:[{name:"MDX",icon:"MDX",asset:w.Ll.MDX,pool_contract_address:g.Z.MDX},{name:"HPT",icon:"HPT",asset:w.Ll.HPT,pool_contract_address:g.Z.HPT},{name:"NEO",icon:"NEO",asset:w.Ll.NEO,pool_contract_address:g.Z.NEO}]}],showDepositModal:!1,curVault:null,totalValueLock:0}},methods:l(l({},d),{},{openDepositModal:function(t){this.curVault=t,this.showDepositModal=!0}}),destroyed:function(){this.$eventBus.$off("INITED")},created:function(){return(0,r.Z)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})))()}},$=b,C=(0,f.Z)($,s,n,!1,null,null,null),D=C.exports}}]);